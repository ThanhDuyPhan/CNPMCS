(function(){app.modals.UserPermissionsModal=function(){function r(){n.setBusy(!0);i.resetUserSpecificPermissions({id:n.getArgs().id}).done(function(){abp.notify.info(app.localize("ResetSuccessfully"));n.getModal().on("hidden.bs.modal",function(){n.reopen()});n.close()}).always(function(){n.setBusy(!1)})}var i=abp.services.app.user,n,t;this.init=function(i){n=i;t=new PermissionsTree;t.init(n.getModal().find(".permission-tree"));n.getModal().find("[data-toggle=tooltip]").tooltip();n.getModal().find(".reset-permissions-button").click(function(){r()})};this.save=function(){n.setBusy(!0);i.updateUserPermissions({id:n.getArgs().id,grantedPermissionNames:t.getSelectedPermissionNames()}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));n.close()}).always(function(){n.setBusy(!1)})}}})();