(function(){$(function(){function u(){return t.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:i.getPaymentHistory},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,data:null,orderable:!1,defaultContent:"",rowAction:{element:$("<button/>").addClass("btn btn-xs btn-primary").text(app.localize("ShowInvoice")).click(function(){f($(this).data())})}},{targets:2,data:"creationTime",render:function(n){return moment(n).format("L")}},{targets:3,data:"editionDisplayName"},{targets:4,data:"gateway",render:function(n){return app.localize("SubscriptionPaymentGatewayType_"+n)}},{targets:5,data:"amount",render:$.fn.dataTable.render.number(",",".",2)},{targets:6,data:"status",render:function(n){return app.localize("SubscriptionPaymentStatus_"+n)}},{targets:7,data:"paymentPeriodType",render:function(n){return app.localize("PaymentPeriodType_"+n)}},{targets:8,data:"dayCount"},{targets:9,data:"paymentId"},{targets:10,data:"invoiceNo"},{targets:11,visible:!1,data:"id"}]})}function f(t){var u=t.invoiceNo,i=t.id;u?window.open("/AppAreaName/Invoice?paymentId="+i,"_blank"):r.createInvoice({subscriptionPaymentId:i}).done(function(){n.ajax.reload();window.open("/AppAreaName/Invoice?paymentId="+i,"_blank")})}var t=$("#PaymentHistoryTable"),i=abp.services.app.payment,r=abp.services.app.invoice,n;$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var i=$(t.target).attr("href");if(i==="#SubscriptionManagementPaymentHistoryTab"){if(n)return;n=u()}})})})();