(function(n){n(function(){function i(){n("#Settings_SmtpUseDefaultCredentials").is(":checked")?(t.slideUp("fast"),t.enabled=!1):(t.slideDown("fast"),t.enabled=!0)}n.validator.addMethod("emailRegex",function(n,t,i){var r=new RegExp(i);return this.optional(t)||r.test(n)},"Please enter a valid email address.");var r=abp.services.app.install,t=n("input[name=smtpDomain],input[name=smtpUserName],input[name=smtpPassword]").closest(".form-group");i();n("#Settings_SmtpUseDefaultCredentials").change(function(){i()});n("#SaveButton").click(function(){var t=n("#installForm").serializeFormToObject();n("#installForm").valid()&&(abp.ui.setBusy(),r.setup({connectionString:t.connectionString,adminPassword:t.adminPassword,webSiteUrl:t.webSiteUrl,defaultLanguage:t.defaultLanguage,smtpSettings:{defaultFromAddress:t.defaultFromAddress,defaultFromDisplayName:t.defaultFromDisplayName,smtpHost:t.smtpHost,smtpPort:t.smtpPort?t.smtpPort:0,SmtpEnableSsl:t.SmtpEnableSsl,SmtpUseDefaultCredentials:t.SmtpUseDefaultCredentials,SmtpDomain:t.SmtpDomain,SmtpUserName:t.SmtpUserName,SmtpPassword:t.SmtpPassword},billInfo:{legalName:t.legalName,address:t.billAddress}}).done(function(){window.location.href=abp.appPath+"Install/Restart"}).always(function(){abp.ui.clearBusy()}))});n("#installForm").validate({debug:!0,rules:{adminPasswordRepeat:{equalTo:"#adminPassword"},defaultFromAddress:{required:!1,email:!1,emailRegex:"^w+([-+.']w+)*@w+([-.]w+)*.w+([-.]w+)*$"}},submitHandler:function(){return}})})})(jQuery);