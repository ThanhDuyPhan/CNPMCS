(function(){app.modals.CreateOrEditRoleModal=function(){var n,r=abp.services.app.role,t=null,i;this.init=function(r){n=r;i=new PermissionsTree;i.init(n.getModal().find(".permission-tree"));t=n.getModal().find("form[name=RoleInformationsForm]");t.validate({ignore:""})};this.save=function(){if(t.valid()){var u=t.serializeFormToObject();n.setBusy(!0);r.createOrUpdateRole({role:u,grantedPermissionNames:i.getSelectedPermissionNames()}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));n.close();abp.event.trigger("app.createOrEditRoleModalSaved")}).always(function(){n.setBusy(!1)})}}}})();