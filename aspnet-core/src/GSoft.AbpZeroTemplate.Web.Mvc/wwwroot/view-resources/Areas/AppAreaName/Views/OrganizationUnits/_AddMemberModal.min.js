(function(){app.modals.AddMemberModal=function(){function u(){r.ajax.reload()}var n,t={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize},f,i,r;this.init=function(e){n=e;t=$.extend(t,n.getOptions().addMemberOptions);f=n.getModal().find("#addMemberModalTable");i=n.getModal().find(".add-member-filter-text");i.val(t.filterText);r=f.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:t.serviceMethod,inputFilter:function(){return{filter:i.val(),organizationUnitId:n.getArgs().organizationUnitId}}},columnDefs:[{targets:0,data:null,defaultContent:"",render:function(n){return'<label for="checkbox_'+n.value+'" class="m-checkbox"><input type="checkbox" id="checkbox_'+n.value+'" /><span><\/span><\/label>'}},{targets:1,data:"name"},{targets:2,visible:!1,data:"value"}],select:{style:"multi",selector:"td:first-child input"}});n.getModal().find(".add-member-filter-button").click(function(n){n.preventDefault();u()});n.getModal().find(".modal-body").keydown(function(n){n.which===13&&(n.preventDefault(),u())});t.loadOnStartup&&u();n.getModal().find("#btnAddUsersToOrganization").click(function(){n.setResult(r.rows({selected:!0}).data().toArray());n.close()})}}})();